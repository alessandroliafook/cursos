<!DOCTYPE html>
<html lang="en" ng-app="listaTelefonica">

<head>
    <meta charset="UTF-8">
    <title>Lista Telefonica</title>
    <link rel="stylesheet" href="lib/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/ui.css">
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-messages.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers/listaTelefonicaCtrl.js"></script>
    <script src="js/services/contatoAPIServices.js"></script>
    <script src="js/services/operadorasAPIServices.js"></script>
    <script src="js/services/serialGeneratorService.js"></script>
    <script src="js/config/serialGeneratorConfig.js"></script>
    <script src="js/value/configValue.js"></script>
    <script src="js/filters/nameFilter.js"></script>
    <script src="js/filters/ellipsisFilter.js"></script>
    <script src="js/directives/uiAlertDirective.js"></script>
    <script src="js/directives/uiDateDirective.js"></script>
    <script src="js/directives/uiAccordionDirective.js"></script>
    <!-- importar apenas um dos arquivos de locale -->
    <script src="lib/angular/i18n/angular-locale_pt-br.js"></script>
    <!-- <script src="lib/angular/i18n/angular-locale_fr-fr.js"></script> -->
    <script>

    </script>
</head>

<body ng-controller="listaTelefonicaCtrl">

<div class="jumbotron">

    <ui-accordions>
        <ui-accordion title="Accordion 1">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </ui-accordion>
        <ui-accordion title="Accordion 2">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </ui-accordion>
        <ui-accordion title="Accordion 3">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </ui-accordion>
        <ui-accordion title="Accordion 4">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </ui-accordion>
        <ui-accordion title="Accordion 5">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </ui-accordion>
    </ui-accordions>
    <h3>{{app}}</h3>

<!--    Utilizando diretivas para personalizar componentes -->
<!--    <ui-alert title="Ops, aconteceu um problema!">-->
<!--        &lt;!&ndash; esse escopo irá ser repassado para a diretiva' &ndash;&gt;-->
<!--        {{error}}-->
<!--    </ui-alert>-->

<!--    <ui-alert title="Série sobre AngularJS">-->
<!--        &lt;!&ndash; esse escopo irá ser repassado para a diretiva' &ndash;&gt;-->
<!--        Episódio 10 - Criando Diretivas - Parte 1-->
<!--    </ui-alert>-->
    <!-- Forma alternativa de utilizar as variáveis do escopo -->
    <!-- <h4 ng-bind="app"></h4> -->
    <input class="form-control" type="text" ng-model="criterioDeBusca"
           placeholder="O que você está buscando?">
    <table ng-hide="contatos.length == 0" class="table">
        <tr>
            <th></th>
            <th>Serial</th>
            <th><a href="" ng-click="ordenarPor('nome')">Nome</a></th>
            <th><a href="" ng-click="ordenarPor('telefone')">Telefone</a></th>
            <th>Operadora</th>
            <th>Data</th>
            <th></th>
        </tr>

        <!-- ng-class é utilizado para aplicar classe dinamicamente
            pode conter uma única referência ou uma lista de referências
            que devem estar definidas no escopo:-->
        <!-- ng-class="classe" -->
        <!-- ng-class="[classe1, classe2]" -->
        <!-- Para definir condições de aplicação da classe é necessário criar
            uma referência de objeto onde a chave é a classe a ser aplicada
            e o valor é a condicional da aplicação, sendo possível definir
            vários estilos diferentes, exemplo: -->
        <!-- ng-class="{selecionado: contato.selecionado, negrito: contato.selecionado}" -->
        <!-- Porém, no caso de uma mesma condição aplicar mais de uma classe, é possível
            tratar a chave como um conjunto de classes: -->
        <!-- É possível aplicar o filtro a apenas um dos campos, basta usar um objeto como parametro
            <tr ng-class="{'selecionado negrito': contato.selecionado}" ng-repeat="contato in contatos | filter:{nome: criterioDeBusca}"> -->
        <!-- É possível encadear os filtros por exemplo vamos filtrar e ordenar por nome e um novo parâmetro -->
        <tr ng-class="{'selecionado negrito': contato.selecionado}"
            ng-repeat="contato in contatos | filter:criterioDeBusca | orderBy:criterioDeOrdenacao:direcaoDaOrdenacao">
            <!-- Forma padrão -->
            <td><input type="checkbox" ng-model="contato.selecionado"></td>
            <td>{{contato.serial}}</td>
            <!-- Para adicionar filtros basta colocar o caractere | e inserir o filtro-->
            <td>{{contato.nome | name | ellipsis:20}}</td>
            <td>{{contato.telefone}}</td>
            <td>{{contato.operadora.nome | lowercase}}</td>
            <!-- para passar parâmetro a um filtro deve usar o caractere : -->
            <td>{{contato.data | date:'dd/mm/yyyy'}}</td>
            <td>
                <div style="width: 20px; height: 20px;" ng-style="{'background-color': contato.cor}"></div>
            </td>

            <!-- Forma curta -->
            <!-- <td ng-repeat=" (key, value) in contato">
                {{value}}
            </td> -->
        </tr>
    </table>
    <hr>
    <form name="contatoForm">
        <input class="form-control" placeholder="Nome" type="text" ng-model="contato.nome"
               name="nome" ng-required="true" ng-minlength=10>
        <input class="form-control" placeholder="Telefone" type="text"
               ng-model="contato.telefone" name="telefone" ng-required="true"
               ng-pattern="/^\(\d{2}\) \d{4,5}-\d{4}$/">
        <input class="form-control" type="text" ng-model="contato.data" name="data"
               placeholder="Data" ui-date/>
        <!-- A forma padrão da expression do ng-options é -->
        <!-- operadora.nome for operadora in operadoras -->
        <!-- desta forma será exibido o atributo nome, porém será selecionado
         o objeto inteiro. Porém é possível exibir um atributo do objeto e
         selecionar outro, utilizando a expression mais completa abaixo: -->
        <!-- operadora.codigo as operadora.nome for operadora in operadoras -->
        <!-- Possível agrupar as opções de acordo com um determinado atributo -->
        <!-- A expressão fica então: -->
        <!-- operadora.nome group by operadora.categoria for operadora in operadoras -->
        <select class="form-control" ng-model="contato.operadora"
                ng-options="operadora.nome + ' ( ' + (operadora.preco | currency) + ' ) ' for operadora in operadoras | orderBy:'nome'">
            <option value="">Selecione uma operadora</option>

        </select>
        <!-- Forma padrão de configurar as mensagens de erro -->
        <!-- <div ng-show="contatoForm.nome.$error.required && contatoForm.nome.$dirty"
            class="alert alert-danger">Por favor, preencha o campo nome!</div>
        <div ng-show="contatoForm.nome.$error.minlength" class="alert alert-danger">
            O campo nome deve ter no mínimo 10 caracteres!</div> -->

        <!-- É possível utilizar uma biblioteca para a mesma finalidade ng-messages -->
        <div ng-show="contatoForm.nome.$dirty" ng-messages="contatoForm.nome.$error">
            <div ng-message="required" class="alert alert-danger">
                Por favor, preencha o campo nome!
            </div>
            <div ng-message="minlength" class="alert alert-danger">
                O campo nome deve ter no mínimo 10 caracteres!
            </div>
        </div>

        <div ng-show="contatoForm.telefone.$error.required && contatoForm.telefone.$dirty"
             class="alert alert-danger">Por favor, preencha o campo telefone!
        </div>
        <div ng-show="contatoForm.telefone.$error.pattern" class="alert alert-danger">
            O campo do telefone deve seguir os seguintes padrões (00) 00000-0000 ou (00) 0000-0000 !
        </div>


        <!-- É possível bloquear um campo utilizando a diretiva ng-disabled,
            onde o parâmetro irá indicar uma diretiva que será avaliada
            e caso o resultado seja true o elemento será bloqueado, exemplo: -->
        <!-- ng-disabled="!contato.nome || !contato.telefone" -->
        <button class="btn btn-primary btn-block" ng-click="adicionarContato(contato)"
                ng-disabled="contatoForm.$invalid">Adicionar Contato
        </button>
        <!-- ng-show/ng-hide apenas aplica a propriedade disable no elemento HTML
            enquanto o ng-if cria o elemento dinamincamente interagindo com a DOM,
            desta forma, escolher qual utilizar deve ser objeto de análise quanto
            a necessidade de carregar o elemento ou não na memória -->
        <button class="btn btn-danger btn-block" ng-click="apagarContatos(contatos)"
                ng-show="isContatoSelecionado(contatos)">Apagar Contatos
        </button>
    </form>
</div>
<!-- Caso acesse o arquivo diretamente irá causar um erro por CORS
    para evitar isso, é necessário utilizar um servidor http:
    npm install http-server -->
<div ng-include="'view/footer.html'"></div>
</body>

</html>